#! /bin/bash

linkfile()
{
    if [ -e $2 ]; then
        mv $2 ~/oldfiles
    fi
    ln -s $1 $2
}

if [ ! -d ~/oldfiles ]; then
    mkdir -p ~/oldfiles
else
    echo "Setup script has already been run, aborting."
    exit 1
fi

git submodule init
git submodule update
cd ~/
#ln -s ~/dotfiles/bashrc ~/.bashrc
linkfile ~/dotfiles/vimrc ~/.vimrc
linkfile ~/dotfiles/vim ~/.vim
linkfile ~/dotfiles/gvimrc ~/.gvimrc
linkfile ~/dotfiles/gitignore_global ~/.gitignore_global
linkfile ~/dotfiles/gitconfig ~/.gitconfig
linkfile ~/dotfiles/xinitrc ~/.xinitrc
linkfile ~/dotfiles/Xresources ~/.Xresources
linkfile ~/dotfiles/zprofile ~/.zprofile
linkfile ~/dotfiles/xprofile ~/.xprofile
linkfile ~/dotfiles/zshrc ~/.zshrc
mkdir -p ~/.config
mkdir -p ~/tmp
linkfile ~/dotfiles/bspwm ~/.config/bspwm
linkfile ~/dotfiles/sxhkd ~/.config/sxhkd
linkfile ~/dotfiles/weechat ~/.config/weechat
linkfile ~/dotfiles/pianobar ~/.config/pianobar
linkfile ~/dotfiles/Scripts ~/Scripts
exit 0
